<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>Avatar Gallery</title>
<style>
body{font-family:system-ui;margin:1.5rem;}
h1{margin:0 0 1rem 0;}
.wrap{display:grid;grid-template-columns:repeat(auto-fill,minmax(180px,1fr));gap:14px;}
.card{border:1px solid #ddd;border-radius:8px;padding:8px;box-shadow:0 1px 2px rgba(0,0,0,.05);background:#fff;}
.card img{width:100%;height:180px;object-fit:cover;border-radius:6px;}
.card figcaption{margin:.4rem 0 .6rem 0;font-size:.9rem;color:#333}
.dl{display:inline-block;padding:.35rem .6rem;border:1px solid #888;border-radius:6px;text-decoration:none;color:#222;background:#f7f7f7}
.dl:hover{background:#efefef}
</style>
</head>
<body>
<h1>Avatar Gallery</h1>
<p>Total: {{ items|length }}</p>
<div class="wrap">
  {% if items %}
    {% for it in items %}
      <figure class="card">
        <img loading="lazy" src="{{ it.url }}" alt="avatar">
        <figcaption>Char #{{ it.char_id }}<br><small>{{ it.name }}</small></figcaption>
        <a class="dl" href="/lab/avatar-gallery/download?f={{ it.rel }}">Download</a>
      </figure>
    {% endfor %}
  {% else %}
    <p>No avatars found yet.</p>
  {% endif %}
</div>
</body>
</html>
